It's a new day and overnight, I was informed in the IRC channel that there is a bug in macOS 12 preventing the display from working over HDMI. This is a bit of a showstopper for the mini, as it's the only display it has (except for perhaps some sort of thunderbolt dongle, though I tried one and it didn't work either?). I also had realized I never made a partition to install Linux to, just the one for the macOS stub. So let's try to start from scratch and see how undoing stuff goes, then redo the install with macOS 11.4 as suggested.

I fired up Disk Utility in 1TR, chose to partition the Macintosh HD volume group and deleted the Linux group. Then I hit the + icon to add a new partition, chose to Add partition, and named it Linux Stub. I added a third partition named Linux as well. I set the Linux Stub size to 5GB with format APFS, the Macintosh HD size to 500GB, and the Linux partition to the remaining size with format FAT.

It failed with some nondescript internal error while formatting the FAT partition and left it just named L. I wondered if it had a problem with the lowercase letters, so I reformatted it, but called it LINUX this time, and it seemed to work okay. This time though, the Linux Stub is now just one APFS volume instead of a volume group. We will see if this matters.

I selected the Macintosh HD disk in the Startup Disk menu under the apple menu in 1TR, then rebooted into macOS to make sure everything was fine. It seemed to be.

I rebooted into 1TR, then reran the installer in 1TR's terminal like before:
curl -L https://mrcn.st/alxsh | sh

I chose to install into the APFS Linux Stub volume I made earlier, then chose to use macOS 11.4 for the boot firmware. It seems there is no distinction under the hood between one APFS volume and a volume group/container, as the installer saw the Linux Stub as a container with one volume.

I selected the Linux Stub startup volume like prompted, then shut down the system like prompted. This time, it seemed to find the Linux Stub volume correctly when telling me which command to execute.

I booted back into 1TR, executed the command it told me, and followed the prompts. The system rebooted, but there was still no display. I connected with the m1n1 USB shell and it showed the resolution correctly this time though. I tried with another display, and this time it showed the console! I chainloaded u-boot and saw u-boot, for a few seconds at least. Not sure why it disappeared after that. It seems the display output is kind of unstable, because I tried again and it stayed. But oh well, it's better than before.

I rebooted back into 1TR and put on my custom m1n1 with u-boot. To serve it I did:
pushd `nix-build -A u-boot`
nix-shell -p python3 --run 'python3 -m http.server'

Then in the 1TR terminal:
curl http://builder-ip:8000/u-boot.macho > u-boot.macho
kmutil configure-boot -c u-boot.macho -C -v /Volumes/Linux\ Stub/

I followed the prompts, rebooted, and saw that u-boot started. I could read the FAT partition I made earlier with the command:
fatls nvme 0:4 /

Nice! Now to install an OS.
